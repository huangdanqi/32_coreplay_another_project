# ğŸ¯ ç®€å•æ—¥è®°API - æ—¥è®°ç”Ÿæˆæ¡ä»¶é€»è¾‘

## ğŸ“Š æ—¥è®°ç”Ÿæˆæ¡ä»¶æµç¨‹å›¾ (ä¸­æ–‡ç‰ˆ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ—¥è®°ç”Ÿæˆæ¡ä»¶é€»è¾‘                                          â”‚
â”‚                    (åŸºäºæ—¥è®°ä»£ç†è§„èŒƒ)                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   äº‹ä»¶è¾“å…¥       â”‚    â”‚   æ¡ä»¶è¯„ä¼°      â”‚    â”‚   æ—¥è®°æ•°é‡      â”‚    â”‚   å¤„ç†æ‰§è¡Œ      â”‚
â”‚                 â”‚â”€â”€â”€â–¶â”‚                 â”‚â”€â”€â”€â–¶â”‚   ç¡®å®š          â”‚â”€â”€â”€â–¶â”‚                 â”‚
â”‚ äº‹ä»¶ç±»åˆ«         â”‚    â”‚ æ£€æŸ¥æ˜¯å¦åº”è¯¥    â”‚    â”‚ ç”Ÿæˆå¤šå°‘        â”‚    â”‚ è¿è¡ŒLLMæˆ–       â”‚
â”‚ äº‹ä»¶åç§°         â”‚    â”‚ ç”Ÿæˆæ—¥è®°        â”‚    â”‚ æ—¥è®°            â”‚    â”‚ è·³è¿‡å¤„ç†        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   éªŒè¯å±‚         â”‚    â”‚   éšæœºå†³ç­–       â”‚    â”‚   æ•°é‡é€»è¾‘      â”‚    â”‚   ç»“æœç”Ÿæˆ      â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ æ£€æŸ¥events.json â”‚    â”‚ éšæœºæ¦‚ç‡         â”‚    â”‚ 0 = è·³è¿‡        â”‚    â”‚ ç”Ÿæˆæ—¥è®°æˆ–      â”‚
â”‚ éªŒè¯æ ¼å¼        â”‚    â”‚ ç”Ÿæˆ            â”‚    â”‚ 1 = å•ä¸ª        â”‚    â”‚ è¿”å›è·³è¿‡åŸå›     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                 â”‚    â”‚ 2+ = å¤šä¸ª       â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ æ¡ä»¶é€»è¾‘å¤„ç†æ­¥éª¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            æ¡ä»¶å¤„ç†ç®¡é“                                          â”‚
â”‚                    (åŸºäºæ—¥è®°ä»£ç†è§„èŒƒ)                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ­¥éª¤1: æ¯æ—¥è§„åˆ’ (00:00 æ¯æ—¥)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ function dailyPlanning():                                                       â”‚
â”‚   // åœ¨00:00æ¯æ—¥ï¼Œç¡®å®šç¬¬äºŒå¤©è¦å†™çš„æ—¥è®°æ•°é‡                                       â”‚
â”‚   dailyDiaryCount = random.randint(0, 5)  // éšæœºé€‰æ‹©0-5ä¹‹é—´çš„æ•°å­—              â”‚
â”‚   remainingDiaries = dailyDiaryCount                                            â”‚
â”‚   completedDiaryTypes = []  // è·Ÿè¸ªå·²å®Œæˆçš„ç±»å‹ (æ¯ç§ç±»å‹åªèƒ½ä¸€ä¸ª)               â”‚
â”‚                                                                                 â”‚
â”‚   return {                                                                     â”‚
â”‚     daily_count: dailyDiaryCount,                                              â”‚
â”‚     remaining: remainingDiaries,                                               â”‚
â”‚     completed_types: completedDiaryTypes                                       â”‚
â”‚   }                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ­¥éª¤2: äº‹ä»¶å¤„ç† (å½“äº‹ä»¶å‘ç”Ÿæ—¶)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ function processEvent(eventCategory, eventName, dailyPlan):                    â”‚
â”‚   // æ£€æŸ¥ä»Šå¤©æ˜¯å¦è¿˜éœ€è¦æ—¥è®°                                                      â”‚
â”‚   if dailyPlan.remaining <= 0:                                                  â”‚
â”‚     return {should_process: false, reason: "æ¯æ—¥æ—¥è®°é…é¢å·²æ»¡"}                  â”‚
â”‚                                                                                 â”‚
â”‚   // æ£€æŸ¥æ­¤æ—¥è®°ç±»å‹æ˜¯å¦å·²å®Œæˆ (æ¯ç§ç±»å‹åªèƒ½ä¸€ä¸ª)                                 â”‚
â”‚   if eventCategory in dailyPlan.completed_types:                              â”‚
â”‚     return {should_process: false, reason: "æ—¥è®°ç±»å‹å·²å®Œæˆ"}                     â”‚
â”‚                                                                                 â”‚
â”‚   // éšæœºç¡®å®šæ˜¯å¦éœ€è¦ä¸ºæ­¤äº‹ä»¶å†™æ—¥è®°                                              â”‚
â”‚   shouldGenerate = random.choice([True, False])  // éšæœºæ¦‚ç‡                    â”‚
â”‚                                                                                 â”‚
â”‚   if shouldGenerate:                                                            â”‚
â”‚     return {                                                                   â”‚
â”‚       should_process: True,                                                     â”‚
â”‚       diary_count: 1,                                                          â”‚
â”‚       reason: "éšæœºæ¡ä»¶æ»¡è¶³"                                                    â”‚
â”‚     }                                                                          â”‚
â”‚   else:                                                                        â”‚
â”‚     return {                                                                   â”‚
â”‚       should_process: False,                                                   â”‚
â”‚       diary_count: 0,                                                          â”‚
â”‚       reason: "éšæœºæ¡ä»¶æœªæ»¡è¶³"                                                  â”‚
â”‚     }                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ­¥éª¤3: æ—¥è®°ç”Ÿæˆ (å¦‚æœæ¡ä»¶æ»¡è¶³)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ function generateDiary(eventCategory, eventName, dailyPlan):                   â”‚
â”‚   // è°ƒç”¨ç›¸åº”çš„æŸ¥è¯¢å‡½æ•°ä½œä¸ºè¾“å…¥å‚æ•°                                              â”‚
â”‚   eventData = queryEventData(eventCategory, eventName)                         â”‚
â”‚                                                                                 â”‚
â”‚   // è°ƒç”¨ç›¸åº”ç±»å‹çš„ä»£ç†æ¥å†™æ—¥è®°                                                  â”‚
â”‚   diaryEntry = callAgent(eventCategory, eventData)                             â”‚
â”‚                                                                                 â”‚
â”‚   // æ›´æ–°æ¯æ—¥è®¡åˆ’                                                               â”‚
â”‚   dailyPlan.remaining -= 1                                                     â”‚
â”‚   dailyPlan.completed_types.append(eventCategory)                              â”‚
â”‚                                                                                 â”‚
â”‚   return {                                                                     â”‚
â”‚     diary_entry: diaryEntry,                                                   â”‚
â”‚     updated_plan: dailyPlan                                                    â”‚
â”‚   }                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ­¥éª¤4: æ¯æ—¥å®Œæˆæ£€æŸ¥
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ function checkDailyCompletion(dailyPlan):                                      â”‚
â”‚   if dailyPlan.remaining == 0:                                                 â”‚
â”‚     return {                                                                   â”‚
â”‚       daily_complete: True,                                                    â”‚
â”‚       message: "æ¯æ—¥æ—¥è®°é…é¢å®Œæˆ"                                               â”‚
â”‚     }                                                                          â”‚
â”‚   else:                                                                        â”‚
â”‚     return {                                                                   â”‚
â”‚       daily_complete: False,                                                  â”‚
â”‚       remaining: dailyPlan.remaining,                                          â”‚
â”‚       message: f"è¿˜éœ€è¦{dailyPlan.remaining}ä¸ªæ—¥è®°"                            â”‚
â”‚     }                                                                          â”‚
â”‚                                                                                 â”‚
â”‚   // æ³¨æ„: å¦‚æœäº‹ä»¶ä¸è¶³å¯¼è‡´æ—¥è®°å†™ä½œä»»åŠ¡ä¸å®Œæ•´ï¼Œ                                   â”‚
â”‚   // ä¸éœ€è¦è¡¥å†™                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ å½“å‰å®ç°é€»è¾‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              å½“å‰å®ç°                                            â”‚
â”‚                    (åŸºäºæ—¥è®°ä»£ç†è§„èŒƒ)                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ¯æ—¥è§„åˆ’é€»è¾‘ (00:00 æ¯æ—¥):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ def daily_planning():                                                           â”‚
â”‚     """åœ¨00:00æ¯æ—¥ï¼Œç¡®å®šç¬¬äºŒå¤©è¦å†™çš„æ—¥è®°æ•°é‡"""                                   â”‚
â”‚     # éšæœºé€‰æ‹©0-5ä¹‹é—´çš„æ•°å­—                                                      â”‚
â”‚     daily_diary_count = random.randint(0, 5)                                    â”‚
â”‚     remaining_diaries = daily_diary_count                                        â”‚
â”‚     completed_diary_types = []  # è·Ÿè¸ªå·²å®Œæˆçš„ç±»å‹ (æ¯ç§ç±»å‹åªèƒ½ä¸€ä¸ª)             â”‚
â”‚                                                                                 â”‚
â”‚     return {                                                                    â”‚
â”‚         "daily_count": daily_diary_count,                                       â”‚
â”‚         "remaining": remaining_diaries,                                          â”‚
â”‚         "completed_types": completed_diary_types                                â”‚
â”‚     }                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

äº‹ä»¶å¤„ç†é€»è¾‘ (å½“äº‹ä»¶å‘ç”Ÿæ—¶):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ def process_event(event_category, event_name, daily_plan):                     â”‚
â”‚     """å¤„ç†äº‹ä»¶å¹¶ç¡®å®šæ˜¯å¦åº”è¯¥ç”Ÿæˆæ—¥è®°"""                                         â”‚
â”‚                                                                                 â”‚
â”‚     # æ£€æŸ¥ä»Šå¤©æ˜¯å¦è¿˜éœ€è¦æ—¥è®°                                                    â”‚
â”‚     if daily_plan["remaining"] <= 0:                                            â”‚
â”‚         return {                                                                â”‚
â”‚             "should_process": False,                                            â”‚
â”‚             "reason": "æ¯æ—¥æ—¥è®°é…é¢å·²æ»¡"                                        â”‚
â”‚         }                                                                       â”‚
â”‚                                                                                 â”‚
â”‚     # æ£€æŸ¥æ­¤æ—¥è®°ç±»å‹æ˜¯å¦å·²å®Œæˆ (æ¯ç§ç±»å‹åªèƒ½ä¸€ä¸ª)                               â”‚
â”‚     if event_category in daily_plan["completed_types"]:                        â”‚
â”‚         return {                                                                â”‚
â”‚             "should_process": False,                                            â”‚
â”‚             "reason": "æ—¥è®°ç±»å‹å·²å®Œæˆ"                                          â”‚
â”‚         }                                                                       â”‚
â”‚                                                                                 â”‚
â”‚     # éšæœºç¡®å®šæ˜¯å¦éœ€è¦ä¸ºæ­¤äº‹ä»¶å†™æ—¥è®°                                            â”‚
â”‚     should_generate = random.choice([True, False])  // éšæœºæ¦‚ç‡                â”‚
â”‚                                                                                 â”‚
â”‚     if should_generate:                                                          â”‚
â”‚         return {                                                                â”‚
â”‚             "should_process": True,                                             â”‚
â”‚             "diary_count": 1,                                                   â”‚
â”‚             "reason": "éšæœºæ¡ä»¶æ»¡è¶³"                                            â”‚
â”‚         }                                                                       â”‚
â”‚     else:                                                                       â”‚
â”‚         return {                                                                â”‚
â”‚             "should_process": False,                                             â”‚
â”‚             "diary_count": 0,                                                   â”‚
â”‚             "reason": "éšæœºæ¡ä»¶æœªæ»¡è¶³"                                          â”‚
â”‚         }                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å¤„ç†æµç¨‹:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. 00:00 æ¯æ—¥ â†’ éšæœºé€‰æ‹©0-5ä¸ªæ—¥è®°                                               â”‚
â”‚ 2. äº‹ä»¶å‘ç”Ÿ â†’ æ£€æŸ¥æ—¥è®°é…é¢æ˜¯å¦å·²æ»¡                                              â”‚
â”‚ 3. äº‹ä»¶å‘ç”Ÿ â†’ æ£€æŸ¥æ—¥è®°ç±»å‹æ˜¯å¦å·²å®Œæˆ                                            â”‚
â”‚ 4. äº‹ä»¶å‘ç”Ÿ â†’ éšæœºæ¦‚ç‡ç”Ÿæˆæ—¥è®°                                                  â”‚
â”‚ 5. å¦‚æœTrue â†’ ç”Ÿæˆ1ä¸ªæ—¥è®°ï¼Œæ›´æ–°é…é¢å’Œå·²å®Œæˆç±»å‹                                 â”‚
â”‚ 6. å¦‚æœFalse â†’ è¿”å›"éšæœºæ¡ä»¶æœªæ»¡è¶³"                                            â”‚
â”‚ 7. ç»§ç»­ç›´åˆ°æ¯æ—¥é…é¢å®Œæˆæˆ–æ²¡æœ‰æ›´å¤šäº‹ä»¶                                           â”‚
â”‚ 8. æ³¨æ„: å¦‚æœäº‹ä»¶ä¸è¶³ï¼Œä¸éœ€è¦è¡¥å†™                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å“åº”ç¤ºä¾‹:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æˆåŠŸæ¡ˆä¾‹ (æ¡ä»¶æ»¡è¶³):                                                             â”‚
â”‚ {                                                                               â”‚
â”‚   "success": true,                                                              â”‚
â”‚   "message": "Diary generated successfully",                                    â”‚
â”‚   "data": {                                                                     â”‚
â”‚     "diary_generated": true,                                                    â”‚
â”‚     "diary_entry": { ... },                                                     â”‚
â”‚     "daily_plan": {                                                             â”‚
â”‚       "remaining": 2,                                                           â”‚
â”‚       "completed_types": ["weather_events"]                                     â”‚
â”‚     }                                                                           â”‚
â”‚   }                                                                             â”‚
â”‚ }                                                                               â”‚
â”‚                                                                                 â”‚
â”‚ è·³è¿‡æ¡ˆä¾‹ (æ¡ä»¶ä¸æ»¡è¶³):                                                           â”‚
â”‚ {                                                                               â”‚
â”‚   "success": true,                                                              â”‚
â”‚   "message": "Event processed but no diary generated",                          â”‚
â”‚   "data": {                                                                     â”‚
â”‚     "diary_generated": false,                                                   â”‚
â”‚     "reason": "Random condition not met"                                       â”‚
â”‚   }                                                                             â”‚
â”‚ }                                                                               â”‚
â”‚                                                                                 â”‚
â”‚ é…é¢å·²æ»¡æ¡ˆä¾‹:                                                                    â”‚
â”‚ {                                                                               â”‚
â”‚   "success": true,                                                              â”‚
â”‚   "message": "Event processed but no diary generated",                          â”‚
â”‚   "data": {                                                                     â”‚
â”‚     "diary_generated": false,                                                   â”‚
â”‚     "reason": "Daily diary quota reached"                                      â”‚
â”‚   }                                                                             â”‚
â”‚ }                                                                               â”‚
â”‚                                                                                 â”‚
â”‚ ç±»å‹å·²å®Œæˆæ¡ˆä¾‹:                                                                  â”‚
â”‚ {                                                                               â”‚
â”‚   "success": true,                                                              â”‚
â”‚   "message": "Event processed but no diary generated",                          â”‚
â”‚   "data": {                                                                     â”‚
â”‚     "diary_generated": false,                                                   â”‚
â”‚     "reason": "Diary type already completed"                                   â”‚
â”‚   }                                                                             â”‚
â”‚ }                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ é«˜çº§æ¡ä»¶é€»è¾‘ (æœªæ¥å®ç°)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            é«˜çº§æ¡ä»¶é€»è¾‘                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å¤šå› ç´ æ¡ä»¶ç³»ç»Ÿ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ function advancedConditionCheck(eventCategory, eventName, context):             â”‚
â”‚   baseProbability = 0.5  // 50% åŸºç¡€æ¦‚ç‡                                        â”‚
â”‚   modifiers = []                                                               â”‚
â”‚                                                                                 â”‚
â”‚   // äº‹ä»¶é‡è¦æ€§å› ç´                                                              â”‚
â”‚   importance = getEventImportance(eventCategory, eventName)                     â”‚
â”‚   if importance == "critical":                                                 â”‚
â”‚     modifiers.append(+0.4)  // å…³é”®äº‹ä»¶ +40%                                   â”‚
â”‚   elif importance == "important":                                               â”‚
â”‚     modifiers.append(+0.2)  // é‡è¦äº‹ä»¶ +20%                                   â”‚
â”‚   elif importance == "minor":                                                  â”‚
â”‚     modifiers.append(-0.2)  // æ¬¡è¦äº‹ä»¶ -20%                                   â”‚
â”‚                                                                                 â”‚
â”‚   // åŸºäºæ—¶é—´çš„å› ç´                                                              â”‚
â”‚   currentHour = getCurrentHour()                                               â”‚
â”‚   if 6 <= currentHour <= 10:  // æ—©æ™¨                                           â”‚
â”‚     modifiers.append(+0.1)   // æ—©æ™¨åŠ æˆ +10%                                   â”‚
â”‚   elif 22 <= currentHour <= 24:  // æ™šä¸Š                                        â”‚
â”‚     modifiers.append(+0.15)  // æ™šä¸ŠåŠ æˆ +15%                                  â”‚
â”‚                                                                                 â”‚
â”‚   // æœ€è¿‘æ—¥è®°æ•°é‡å› ç´                                                            â”‚
â”‚   recentDiaries = getRecentDiaryCount(hours=24)                               â”‚
â”‚   if recentDiaries > 5:                                                        â”‚
â”‚     modifiers.append(-0.3)  // æœ€è¿‘æ—¥è®°å¤ªå¤š -30%                               â”‚
â”‚   elif recentDiaries == 0:                                                     â”‚
â”‚     modifiers.append(+0.2)  // æ²¡æœ‰æœ€è¿‘æ—¥è®° +20%                               â”‚
â”‚                                                                                 â”‚
â”‚   // ç”¨æˆ·æ´»è·ƒåº¦å› ç´                                                              â”‚
â”‚   userActivity = getUserActivityLevel()                                        â”‚
â”‚   if userActivity == "high":                                                   â”‚
â”‚     modifiers.append(+0.1)  // æ´»è·ƒç”¨æˆ· +10%                                    â”‚
â”‚   elif userActivity == "low":                                                  â”‚
â”‚     modifiers.append(-0.1)  // ä¸æ´»è·ƒç”¨æˆ· -10%                                  â”‚
â”‚                                                                                 â”‚
â”‚   // è®¡ç®—æœ€ç»ˆæ¦‚ç‡                                                               â”‚
â”‚   finalProbability = baseProbability + sum(modifiers)                          â”‚
â”‚   finalProbability = max(0.0, min(1.0, finalProbability))  // é™åˆ¶åœ¨[0,1]      â”‚
â”‚                                                                                 â”‚
â”‚   // åšå†³ç­–                                                                     â”‚
â”‚   shouldGenerate = random.random() < finalProbability                          â”‚
â”‚                                                                                 â”‚
â”‚   return {                                                                     â”‚
â”‚     should_generate: shouldGenerate,                                           â”‚
â”‚     probability: finalProbability,                                              â”‚
â”‚     modifiers: modifiers,                                                       â”‚
â”‚     reason: generateReason(shouldGenerate, finalProbability, modifiers)        â”‚
â”‚   }                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ—¥è®°æ•°é‡é€»è¾‘:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ function determineDiaryCount(conditionResult, eventCategory, eventName):       â”‚
â”‚   if not conditionResult.should_generate:                                      â”‚
â”‚     return {count: 0, should_process: false}                                   â”‚
â”‚                                                                                 â”‚
â”‚   // åŸºäºäº‹ä»¶ç±»å‹ç¡®å®šæ•°é‡                                                       â”‚
â”‚   count = 1  // é»˜è®¤                                                            â”‚
â”‚                                                                                 â”‚
â”‚   if eventCategory == "adopted_function":                                      â”‚
â”‚     count = 2  // é‡å¤§ç”Ÿæ´»äº‹ä»¶ç”Ÿæˆ2ä¸ªæ—¥è®°                                       â”‚
â”‚   elif eventCategory == "holiday_events":                                      â”‚
â”‚     if eventName == "during_holiday":                                          â”‚
â”‚       count = 2  // æ´»è·ƒå‡æœŸç”Ÿæˆ2ä¸ªæ—¥è®°                                        â”‚
â”‚     else:                                                                       â”‚
â”‚       count = 1  // å…¶ä»–å‡æœŸç”Ÿæˆ1ä¸ªæ—¥è®°                                        â”‚
â”‚   elif eventCategory == "friends_function":                                    â”‚
â”‚     if eventName == "made_new_friend":                                         â”‚
â”‚       count = 2  // æ–°æœ‹å‹ç”Ÿæˆ2ä¸ªæ—¥è®°                                           â”‚
â”‚     elif eventName == "friend_deleted":                                        â”‚
â”‚       count = 2  // å¤±å»æœ‹å‹ç”Ÿæˆ2ä¸ªæ—¥è®°                                         â”‚
â”‚     else:                                                                       â”‚
â”‚       count = 1  // å…¶ä»–æœ‹å‹äº‹ä»¶ç”Ÿæˆ1ä¸ªæ—¥è®°                                     â”‚
â”‚   elif eventCategory == "unkeep_interactive":                                  â”‚
â”‚     if "neglect_30_days" in eventName:                                         â”‚
â”‚       count = 2  // é•¿æœŸå¿½è§†ç”Ÿæˆ2ä¸ªæ—¥è®°                                         â”‚
â”‚     else:                                                                       â”‚
â”‚       count = 1  // å…¶ä»–å¿½è§†ç”Ÿæˆ1ä¸ªæ—¥è®°                                        â”‚
â”‚                                                                                 â”‚
â”‚   return {                                                                     â”‚
â”‚     count: count,                                                              â”‚
â”‚     should_process: true,                                                      â”‚
â”‚     reason: f"åŸºäºäº‹ä»¶é‡è¦æ€§ç”Ÿæˆ{count}ä¸ªæ—¥è®°"                                   â”‚
â”‚   }                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š æ¡ä»¶é€»è¾‘å†³ç­–æ ‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            æ¡ä»¶å†³ç­–æ ‘                                            â”‚
â”‚                    (åŸºäºæ—¥è®°ä»£ç†è§„èŒƒ)                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   00:00 æ¯æ—¥   â”‚
                    â”‚   è§„åˆ’         â”‚
                    â”‚                 â”‚
                    â”‚ éšæœºé€‰æ‹©        â”‚
                    â”‚ 0-5ä¸ªæ—¥è®°      â”‚
                    â”‚ ç”¨äºå½“å¤©        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   äº‹ä»¶å‘ç”Ÿ      â”‚
                    â”‚  (ç±»åˆ« +        â”‚
                    â”‚   åç§°)         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  æ¯æ—¥é…é¢       â”‚
                    â”‚  å·²æ»¡?          â”‚
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
                    â”‚  â”‚ æ£€æŸ¥æ˜¯å¦     â”‚â”‚
                    â”‚  â”‚ remaining   â”‚â”‚
                    â”‚  â”‚ <= 0        â”‚â”‚
                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                â”‚
                    â–¼                â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚    å¦       â”‚  â”‚    æ˜¯       â”‚
            â”‚             â”‚  â”‚             â”‚
            â–¼             â”‚  â”‚             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚             â”‚
    â”‚ æ—¥è®°ç±»å‹    â”‚      â”‚  â”‚             â”‚
    â”‚ å·²å®Œæˆ?     â”‚      â”‚  â”‚             â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚      â”‚  â”‚             â”‚
    â”‚ â”‚ æ£€æŸ¥æ˜¯å¦ â”‚â”‚      â”‚  â”‚             â”‚
    â”‚ â”‚ ç±»å‹åœ¨  â”‚â”‚      â”‚  â”‚             â”‚
    â”‚ â”‚ å·²å®Œæˆ  â”‚â”‚      â”‚  â”‚             â”‚
    â”‚ â”‚ ç±»å‹ä¸­  â”‚â”‚      â”‚  â”‚             â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚      â”‚  â”‚             â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚             â”‚
          â”‚              â”‚  â”‚             â”‚
    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚             â”‚
    â”‚            â”‚      â”‚  â”‚             â”‚
    â–¼            â–¼      â”‚  â”‚             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚             â”‚
â”‚   å¦    â”‚ â”‚   æ˜¯    â”‚â”‚  â”‚             â”‚
â”‚         â”‚ â”‚         â”‚â”‚  â”‚             â”‚
â”‚ éšæœº    â”‚ â”‚ è·³è¿‡    â”‚â”‚  â”‚             â”‚
â”‚ æ¦‚ç‡    â”‚ â”‚ å¤„ç†    â”‚â”‚  â”‚             â”‚
â”‚ ç”Ÿæˆ    â”‚ â”‚ è¿”å›    â”‚â”‚  â”‚             â”‚
â”‚ æ—¥è®°?   â”‚ â”‚ "ç±»å‹   â”‚â”‚  â”‚             â”‚
â”‚         â”‚ â”‚ å·²å®Œæˆ" â”‚â”‚  â”‚             â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚             â”‚
      â”‚                â”‚  â”‚             â”‚
      â–¼                â”‚  â”‚             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚  â”‚             â”‚
â”‚ éšæœº        â”‚        â”‚  â”‚             â”‚
â”‚ å†³ç­–        â”‚        â”‚  â”‚             â”‚
â”‚ (çœŸ/å‡)     â”‚        â”‚  â”‚             â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  â”‚             â”‚
      â”‚                â”‚  â”‚             â”‚
â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”        â”‚  â”‚             â”‚
â”‚            â”‚        â”‚  â”‚             â”‚
â–¼            â–¼        â”‚  â”‚             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚             â”‚
â”‚  çœŸ     â”‚ â”‚  å‡     â”‚â”‚  â”‚             â”‚
â”‚         â”‚ â”‚         â”‚â”‚  â”‚             â”‚
â”‚ ç”Ÿæˆ    â”‚ â”‚ è·³è¿‡    â”‚â”‚  â”‚             â”‚
â”‚ 1ä¸ªæ—¥è®° â”‚ â”‚ å¤„ç†    â”‚â”‚  â”‚             â”‚
â”‚ æ›´æ–°    â”‚ â”‚ è¿”å›    â”‚â”‚  â”‚             â”‚
â”‚ é…é¢    â”‚ â”‚ "éšæœº   â”‚â”‚  â”‚             â”‚
â”‚ æ›´æ–°    â”‚ â”‚ æœªæ»¡è¶³" â”‚â”‚  â”‚             â”‚
â”‚ ç±»å‹    â”‚ â”‚         â”‚â”‚  â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚             â”‚
                       â”‚  â”‚             â”‚
                       â”‚  â”‚             â”‚
                       â–¼  â–¼             â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚   æˆåŠŸ      â”‚ â”‚   è·³è¿‡      â”‚
                  â”‚   å“åº”      â”‚ â”‚   å“åº”      â”‚
                  â”‚             â”‚ â”‚             â”‚
                  â”‚ åŒ…å«æ—¥è®°+   â”‚ â”‚ åŒ…å«åŸå›     â”‚
                  â”‚ æ›´æ–°è®¡åˆ’    â”‚ â”‚ (é…é¢/ç±»å‹/ â”‚
                  â”‚ çš„JSON      â”‚ â”‚ éšæœº)çš„JSON â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ å…³é”®è¦ç‚¹æ€»ç»“

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            å…³é”®è¦ç‚¹æ€»ç»“                                          â”‚
â”‚                    (åŸºäºæ—¥è®°ä»£ç†è§„èŒƒ)                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. æ¯æ—¥è§„åˆ’ (00:00 æ¯æ—¥):
   - éšæœºé€‰æ‹©0-5ä¸ªæ—¥è®°ç”¨äºå½“å¤©
   - è·Ÿè¸ªå‰©ä½™æ—¥è®°å’Œå·²å®Œæˆç±»å‹
   - åœ¨åˆå¤œé‡ç½®æ¯æ—¥

2. äº‹ä»¶å¤„ç†æ¡ä»¶:
   - æ£€æŸ¥æ¯æ—¥é…é¢æ˜¯å¦å·²æ»¡ (remaining <= 0)
   - æ£€æŸ¥æ—¥è®°ç±»å‹æ˜¯å¦å·²å®Œæˆ (æ¯ç§ç±»å‹åªèƒ½ä¸€ä¸ª)
   - éšæœºæ¦‚ç‡ä¸ºæ¯ä¸ªäº‹ä»¶ç”Ÿæˆæ—¥è®°

3. æ—¥è®°ç”Ÿæˆè§„åˆ™:
   - æ¯å¤©æ¯ç§ç±»å‹åªèƒ½ä¸€ä¸ªæ—¥è®°æ¡ç›®
   - æ¯ä¸ªæˆåŠŸæ¡ä»¶ç”Ÿæˆ1ä¸ªæ—¥è®°
   - ç”Ÿæˆåæ›´æ–°é…é¢å’Œå·²å®Œæˆç±»å‹

4. å®Œæˆé€»è¾‘:
   - ç»§ç»­ç›´åˆ°æ¯æ—¥é…é¢å®Œæˆ
   - å¦‚æœäº‹ä»¶ä¸è¶³ï¼Œä¸éœ€è¦è¡¥å†™
   - å…¨å¤©è·Ÿè¸ªè¿›åº¦

5. å“åº”ç»“æ„:
   - æ€»æ˜¯è¿”å› success: true
   - diary_generated: true/false
   - åŒ…å«å†³ç­–åŸå› 
   - é€‚ç”¨æ—¶åŒ…å«æ¯æ—¥è®¡åˆ’æ›´æ–°
```

## ğŸ” å®é™…ä»£ç ç¤ºä¾‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            å®é™…ä»£ç å®ç°                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å½“å‰å®ç° (simple_diary_api.py):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ def should_generate_diary(self, event_category: str, event_name: str) -> bool:  â”‚
â”‚     """ç¡®å®šæ˜¯å¦åº”è¯¥ä¸ºæ­¤äº‹ä»¶ç”Ÿæˆæ—¥è®°ã€‚"""                                         â”‚
â”‚     # éšæœºå†³ç­– (50% æ¦‚ç‡)                                                       â”‚
â”‚     return random.choice([True, False])                                        â”‚
â”‚                                                                                 â”‚
â”‚ def process_event(self, event_category: str, event_name: str):                â”‚
â”‚     # 1. éªŒè¯äº‹ä»¶                                                               â”‚
â”‚     if not self.validate_event(event_category, event_name):                    â”‚
â”‚         return {"success": False, "error": "Invalid event"}                     â”‚
â”‚                                                                                 â”‚
â”‚     # 2. æ£€æŸ¥æ¡ä»¶                                                               â”‚
â”‚     if not self.should_generate_diary(event_category, event_name):            â”‚
â”‚         return {                                                               â”‚
â”‚             "success": True,                                                    â”‚
â”‚             "diary_generated": False,                                           â”‚
â”‚             "reason": "Random condition not met"                               â”‚
â”‚         }                                                                      â”‚
â”‚                                                                                 â”‚
â”‚     # 3. æ¡ä»¶æ»¡è¶³ - ç”Ÿæˆæ—¥è®°                                                    â”‚
â”‚     diary_entry = self.generate_diary_entry(event_category, event_name)        â”‚
â”‚     return {                                                                   â”‚
â”‚         "success": True,                                                        â”‚
â”‚         "diary_generated": True,                                               â”‚
â”‚         "diary_entry": diary_entry                                             â”‚
â”‚     }                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æœªæ¥å®ç°ç¤ºä¾‹:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ def advanced_should_generate_diary(self, event_category: str, event_name: str): â”‚
â”‚     """é«˜çº§æ¡ä»¶æ£€æŸ¥ - å¤šå› ç´ å†³ç­–"""                                             â”‚
â”‚     base_prob = 0.5                                                             â”‚
â”‚     modifiers = []                                                              â”‚
â”‚                                                                                 â”‚
â”‚     # äº‹ä»¶é‡è¦æ€§                                                               â”‚
â”‚     if event_category == "adopted_function":                                   â”‚
â”‚         modifiers.append(+0.4)  # é‡å¤§äº‹ä»¶                                     â”‚
â”‚     elif event_category == "weather_events":                                   â”‚
â”‚         modifiers.append(-0.1)  # æ™®é€šäº‹ä»¶                                     â”‚
â”‚                                                                                 â”‚
â”‚     # æ—¶é—´å› ç´                                                                   â”‚
â”‚     hour = datetime.now().hour                                                  â”‚
â”‚     if 6 <= hour <= 10:  # æ—©æ™¨                                                â”‚
â”‚         modifiers.append(+0.1)                                                 â”‚
â”‚     elif 22 <= hour <= 24:  # æ™šä¸Š                                              â”‚
â”‚         modifiers.append(+0.15)                                                â”‚
â”‚                                                                                 â”‚
â”‚     # è®¡ç®—æœ€ç»ˆæ¦‚ç‡                                                              â”‚
â”‚     final_prob = base_prob + sum(modifiers)                                    â”‚
â”‚     final_prob = max(0.0, min(1.0, final_prob))                               â”‚
â”‚                                                                                 â”‚
â”‚     # éšæœºå†³ç­–                                                                  â”‚
â”‚     return random.random() < final_prob                                         â”‚
â”‚                                                                                 â”‚
â”‚ def determine_diary_count(self, event_category: str, event_name: str) -> int:  â”‚
â”‚     """ç¡®å®šç”Ÿæˆæ—¥è®°çš„æ•°é‡"""                                                    â”‚
â”‚     if event_category == "adopted_function":                                   â”‚
â”‚         return 2  # é‡å¤§äº‹ä»¶ç”Ÿæˆ2ä¸ªæ—¥è®°                                         â”‚
â”‚     elif event_category == "holiday_events":                                   â”‚
â”‚         if event_name == "during_holiday":                                     â”‚
â”‚             return 2  # æ´»è·ƒå‡æœŸç”Ÿæˆ2ä¸ªæ—¥è®°                                     â”‚
â”‚         else:                                                                   â”‚
â”‚             return 1  # å…¶ä»–å‡æœŸç”Ÿæˆ1ä¸ªæ—¥è®°                                     â”‚
â”‚     else:                                                                       â”‚
â”‚         return 1  # é»˜è®¤ç”Ÿæˆ1ä¸ªæ—¥è®°                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ æ€»ç»“

æ¡ä»¶é€»è¾‘æ˜¯ä¸€ä¸ª**ç»¼åˆæ—¥è®°ç”Ÿæˆæ§åˆ¶ç³»ç»Ÿ**ï¼Œå®ƒå®ç°äº†æ—¥è®°ä»£ç†è§„èŒƒ:

### ğŸ”‘ **æ ¸å¿ƒé€»è¾‘:**

1. **æ¯æ—¥è§„åˆ’ (00:00)**: éšæœºé€‰æ‹©0-5ä¸ªæ—¥è®°ç”¨äºå½“å¤©
2. **äº‹ä»¶å¤„ç†**: æ£€æŸ¥é…é¢ã€ç±»å‹å®Œæˆå’Œéšæœºæ¦‚ç‡
3. **æ—¥è®°ç”Ÿæˆ**: æ¯ä¸ªæˆåŠŸæ¡ä»¶ç”Ÿæˆ1ä¸ªæ—¥è®°
4. **è¿›åº¦è·Ÿè¸ª**: æ›´æ–°é…é¢å’Œå·²å®Œæˆç±»å‹

### ğŸ“Š **å…³é”®è§„åˆ™:**

- **æ¯æ—¥é…é¢**: æ¯å¤©0-5ä¸ªæ—¥è®° (åˆå¤œéšæœºç¡®å®š)
- **ç±»å‹é™åˆ¶**: æ¯å¤©æ¯ç§ç±»å‹åªèƒ½ä¸€ä¸ªæ—¥è®°æ¡ç›®
- **éšæœºæ¦‚ç‡**: æ¯ä¸ªäº‹ä»¶éƒ½æœ‰éšæœºæ¦‚ç‡ç”Ÿæˆæ—¥è®°
- **æ— éœ€è¡¥å†™**: å¦‚æœäº‹ä»¶ä¸è¶³ï¼Œä¸éœ€è¦è¡¥å†™

### ğŸ¯ **å†³ç­–æµç¨‹:**

1. **æ£€æŸ¥æ¯æ—¥é…é¢** â†’ å¦‚æœå·²æ»¡ï¼Œè·³è¿‡å¤„ç†
2. **æ£€æŸ¥ç±»å‹å®Œæˆ** â†’ å¦‚æœå·²å®Œæˆï¼Œè·³è¿‡å¤„ç†  
3. **éšæœºå†³ç­–** â†’ éšæœºæ¦‚ç‡ç”Ÿæˆæ—¥è®°
4. **ç”Ÿæˆæ—¥è®°** â†’ å¦‚æœæ¡ä»¶æ»¡è¶³ï¼Œç”Ÿæˆ1ä¸ªæ—¥è®°å¹¶æ›´æ–°è®¡åˆ’

è¿™ä¸ªç³»ç»Ÿç¡®ä¿**å—æ§çš„æ—¥è®°ç”Ÿæˆ**ï¼ŒåŒæ—¶ä¿æŒ**å¤šæ ·æ€§**å¹¶**é˜²æ­¢è¿‡åº¦ç”Ÿæˆ**æ—¥è®°! ğŸ‰

